<!DOCTYPE html>
<html lang="vi"
    th:replace="~{/views/gdienChung/templateChung.html::view(~{::main}, ~{::title})}">

    <head>
        <meta charset="UTF-8">
        <title>Kh√≥a h·ªçc ƒë√£ t·∫°o</title>
    </head>

    <body>
        <main class="khoahocdatao">
            <div class="container mt-4">
                <div
                    class="d-flex justify-content-between align-items-center mb-4">
                    <h4 class="fw-bold underline-animated m-0">
                        <i class="fas fa-book-open me-2 text-icon-green"></i>
                        <span class="text-title-blue">Danh s√°ch kh√≥a h·ªçc ƒë√£
                            t·∫°o</span>
                    </h4>
                    <a href="/giangvien/them-moi-khoa-hoc"
                        class="btn text-primary mt-3 underline-animated">
                        ‚ûï Th√™m kh√≥a h·ªçc m·ªõi
                    </a>
                </div>
                <!-- Nav tabs -->
                <ul class="nav nav-tabs" id="courseTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="pending-tab"
                            data-bs-toggle="tab" data-bs-target="#pending"
                            type="button" role="tab"> <i
                                class="fas fa-clock me-1 text-warning"></i>Ch·ªù
                            duy·ªát</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="draft-tab"
                            data-bs-toggle="tab" data-bs-target="#draft"
                            type="button" role="tab"><i
                                class="fas fa-pen me-1 text-secondary"></i>B·∫£n
                            nh√°p</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="published-tab"
                            data-bs-toggle="tab" data-bs-target="#published"
                            type="button" role="tab"><i
                                class="fas fa-check-circle me-1 text-success"></i>ƒê√£
                            xu·∫•t b·∫£n</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="unpublished-tab"
                            data-bs-toggle="tab" data-bs-target="#unpublished"
                            type="button" role="tab"><i
                                class="fas fa-trash-alt me-1 text-danger"></i>ƒê√£
                            x√≥a</button>
                    </li>
                </ul>

                <!-- Tab content -->
                <div class="tab-content mt-3">
                    <!-- Ch·ªù duy·ªát -->
                    <div class="tab-pane fade show active" id="pending"
                        role="tabpanel">
                        <section class="mb-5 mt-3"
                            th:if="!${#lists.isEmpty(listPendingApproval)}">
                            <div
                                class="section-header mb-3 mt-4 px-3 py-2 border-start border-4 border-warning">
                                <h4 class="fw-bold text-dark m-0">
                                    <i
                                        class="bi bi-hourglass-split text-warning me-2"></i>
                                    Kh√≥a h·ªçc ƒëang ch·ªù duy·ªát
                                </h4>
                            </div>

                            <ul class="list-group shadow-sm">
                                <th:block
                                    th:each="khoaHoc : ${listPendingApproval}">
                                    <li
                                        class="list-group-item khoa-hoc-cho-duyet d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-semibold">
                                                <i
                                                    class="bi bi-book text-primary me-1"></i>
                                                <span
                                                    class="text-primary fw-semibold me-1">T√™n
                                                    kh√≥a h·ªçc:</span>
                                                <span
                                                    th:text="${khoaHoc.tenKhoaHoc}">T√™n
                                                    kh√≥a h·ªçc</span>
                                            </div>

                                            <small class="text-muted">
                                                <i
                                                    class="bi bi-tag-fill me-1 text-secondary"></i>
                                                M√£: <span
                                                    th:text="${khoaHoc.khoahocId}"></span>
                                                |
                                                <i
                                                    class="bi bi-currency-dollar me-1 text-success"></i>
                                                Gi√°: <span
                                                    th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'"></span>
                                            </small>
                                        </div>
                                        <div
                                            class="d-flex align-items-center gap-2">
                                            <button
                                                class="btn btn-outline-danger rounded-pill px-2 py-0"
                                                style="height: 28px; font-size: 0.8rem; line-height: 1"
                                                data-bs-toggle="modal"
                                                th:attr="data-bs-target='#modalHuyYeuCau-' + ${khoaHoc.khoahocId}">
                                                <i
                                                    class="bi bi-x-circle me-1"></i>H·ªßy
                                                y√™u c·∫ßu
                                            </button>

                                            <span
                                                class="btn bg-warning text-dark rounded-pill d-flex align-items-center justify-content-center px-2 py-0"
                                                style="height: 28px; font-size: 0.8rem; line-height: 1">
                                                <i
                                                    class="bi bi-clock-history me-1"></i>Ch·ªù
                                                duy·ªát
                                            </span>
                                        </div>
                                    </li>

                                    <!-- Modal x√°c nh·∫≠n h·ªßy y√™u c·∫ßu -->
                                    <div class="modal fade"
                                        th:id="'modalHuyYeuCau-' + ${khoaHoc.khoahocId}"
                                        tabindex="-1">
                                        <div
                                            class="modal-dialog modal-dialog-centered">
                                            <div
                                                class="modal-content rounded-4 shadow-lg border-0">
                                                <div
                                                    class="modal-header bg-danger text-white rounded-top-4">
                                                    <h5 class="modal-title">
                                                        <i
                                                            class="bi bi-exclamation-triangle-fill me-2"></i>
                                                        X√°c nh·∫≠n h·ªßy y√™u c·∫ßu
                                                    </h5>
                                                    <button type="button"
                                                        class="btn-close btn-close-white"
                                                        data-bs-dismiss="modal"></button>
                                                </div>
                                                <div
                                                    class="modal-body text-center py-4">
                                                    <i
                                                        class="bi bi-x-circle-fill text-danger fs-2 mb-3"></i>
                                                    <p class="mb-0">
                                                        B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën
                                                        <strong>h·ªßy y√™u c·∫ßu
                                                            duy·ªát</strong> kh√≥a
                                                        h·ªçc n√†y kh√¥ng?<br> Kh√≥a
                                                        h·ªçc s·∫Ω ƒë∆∞·ª£c
                                                        <strong>chuy·ªÉn v·ªÅ b·∫£n
                                                            nh√°p</strong>.
                                                    </p>
                                                </div>
                                                <div
                                                    class="modal-footer justify-content-center bg-light rounded-bottom-4">
                                                    <button type="button"
                                                        class="btn btn-outline-secondary px-4"
                                                        data-bs-dismiss="modal">
                                                        Kh√¥ng
                                                    </button>
                                                    <form
                                                        th:action="@{/giangvien/huy-yeu-cau-khoa-hoc/{id}(id=${khoaHoc.khoahocId})}"
                                                        method="post">
                                                        <button type="submit"
                                                            class="btn btn-outline-danger px-4">
                                                            ƒê·ªìng √Ω
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </th:block>
                            </ul>
                        </section>

                        <div th:if="${#lists.isEmpty(listPendingApproval)}"
                            class="text-muted">B·∫°n ch∆∞a c√≥ kh√≥a h·ªçc n√†o.</div>
                    </div>

                    <!-- Nh√°p -->
                    <div class="tab-pane fade" id="draft" role="tabpanel">
                        <section class="mb-5 mt-3"
                            th:if="!${#lists.isEmpty(listDraft)}">
                            <div
                                class="section-header mb-3 mt-4 px-3 py-2 border-start border-4 border-info">
                                <h4 class="fw-bold text-dark m-0">
                                    <i
                                        class="bi bi-pencil-square text-info me-2"></i>
                                    Kh√≥a h·ªçc b·∫£n nh√°p
                                </h4>
                            </div>

                            <ul class="list-group shadow-sm">
                                <th:block th:each="khoaHoc : ${listDraft}">
                                    <li
                                        class="list-group-item khoa-hoc-nhap d-flex justify-content-between align-items-start">
                                        <div class="ms-2 me-auto">
                                            <div class="fw-semibold">
                                                <i
                                                    class="bi bi-book text-primary me-1"></i>
                                                <span
                                                    class="text-primary fw-semibold me-1">T√™n
                                                    kh√≥a h·ªçc:</span>
                                                <span
                                                    th:text="${khoaHoc.tenKhoaHoc}">T√™n
                                                    kh√≥a h·ªçc</span>
                                            </div>

                                            <small class="text-muted">
                                                <i
                                                    class="bi bi-tag-fill me-1 text-secondary"></i>
                                                M√£: <span
                                                    th:text="${khoaHoc.khoahocId}"></span>
                                                |
                                                <i
                                                    class="bi bi-currency-dollar me-1 text-success"></i>
                                                Gi√°: <span
                                                    th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT')} + '‚Ç´'"></span>
                                            </small>
                                        </div>

                                        <div
                                            class="d-flex align-items-center gap-2">
                                            <a
                                                th:href="@{/giangvien/them-moi-khoa-hoc/them-chuong(khoahocId=${khoaHoc.khoahocId})}"
                                                class="btn btn-outline-primary rounded-pill px-2 py-0"
                                                style="height: 28px; font-size: 0.8rem;">
                                                <i
                                                    class="bi bi-pencil-square me-1"></i>Ch·ªânh
                                                s·ª≠a
                                            </a>

                                            <button
                                                class="btn btn-outline-danger rounded-pill px-2 py-0"
                                                style="height: 28px; font-size: 0.8rem;"
                                                th:attr="data-id=${khoaHoc.khoahocId}"
                                                onclick="xoaKhoaHoc(this, event)">
                                                <i
                                                    class="bi bi-trash me-1"></i>X√≥a
                                            </button>
                                        </div>
                                    </li>
                                </th:block>
                            </ul>
                        </section>

                        <div th:if="${#lists.isEmpty(listDraft)}"
                            class="text-muted">B·∫°n ch∆∞a c√≥ kh√≥a h·ªçc n√†o.</div>
                    </div>

                    <div class="tab-pane fade" id="published" role="tabpanel">
                        <section class="mb-5 mt-3"
                            th:if="!${#lists.isEmpty(listPublished)}">
                            <div
                                class="section-header d-flex justify-content-between align-items-center mb-4 mt-4 px-3 py-2 border-start border-4 border-success">
                                <h4 class="fw-bold text-dark m-0">
                                    <i
                                        class="bi bi-check2-circle text-success me-2"></i>
                                    Kh√≥a h·ªçc ƒë√£ xu·∫•t b·∫£n
                                </h4>
                            </div>
                            <div
                                class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-4">
                                <div class="col"
                                    th:each="khoaHoc : ${listPublished}">
                                    <div class="khoa-hoc-card h-100 shadow-sm"
                                        th:onclick="|window.location.href='/noi-dung-khoa-hoc/${khoaHoc.khoahocId}?back=khoa-hoc-da-tao'|">
                                        <img th:if="${khoaHoc.anhBia != null}"
                                            th:src="${khoaHoc.anhBia}"
                                            alt="·∫¢nh kho√° h·ªçc">

                                        <div
                                            class="card-body d-flex flex-column pb-0">
                                            <h6 class="card-title"
                                                th:text="${khoaHoc.tenKhoaHoc}">T√™n
                                                kh√≥a h·ªçc</h6>
                                        </div>

                                        <div class="card-footer pt-0">
                                            <div class="mb-3">
                                                <p
                                                    th:if="${khoaHoc.giaKhuyenMai != null and khoaHoc.giaKhuyenMai.doubleValue() > 0}"
                                                    class="card-text mb-0">
                                                    <span
                                                        class="fw-bold text-danger me-2"
                                                        th:text="${#numbers.formatDecimal(khoaHoc.giaKhuyenMai, 0, 'COMMA', 0, 'POINT') + ' ‚Ç´'}"></span>
                                                    <del class="text-muted"
                                                        th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ‚Ç´'}"></del>
                                                </p>
                                                <p
                                                    th:if="${khoaHoc.giaKhuyenMai == null or khoaHoc.giaKhuyenMai.doubleValue() == 0}"
                                                    class="card-text fw-bold mb-0">
                                                    <span
                                                        th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ‚Ç´'}"></span>
                                                </p>
                                            </div>

                                            <div
                                                class="d-flex justify-content-center gap-3 pb-2">
                                                <button type="button"
                                                    onclick="event.stopPropagation()"
                                                    class="btn btn-outline-primary btn-sm share-btn py-1 px-2"
                                                    style="font-size: 12px;"
                                                    data-bs-toggle="modal"
                                                    th:data-bs-target="'#shareModal-' + ${khoaHoc.khoahocId}">
                                                    <i
                                                        class="fas fa-share me-1"></i>
                                                </button>

                                                <button type="button"
                                                    class="btn btn-outline-danger btn-sm py-1 px-2"
                                                    style="font-size: 12px;"
                                                    th:attr="data-id=${khoaHoc.khoahocId}"
                                                    onclick="xoaKhoaHoc(this, event)">
                                                    <i class="fas fa-trash-alt"
                                                        style="font-size: 12px;"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Modal chia s·∫ª -->
                                    <div class="modal fade"
                                        th:id="'shareModal-' + ${khoaHoc.khoahocId}"
                                        tabindex="-1" aria-hidden="true">
                                        <div
                                            class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                <div class="modal-header"
                                                    style="background-color: #e9f0ff; border-bottom: 2px solid #0d6efd;">
                                                    <h6 class="modal-title">
                                                        <i
                                                            class="fas fa-share-alt text-primary me-2"></i>
                                                        Chia s·∫ª kh√≥a h·ªçc:
                                                        <span
                                                            th:text="${khoaHoc.tenKhoaHoc}"></span>
                                                    </h6>
                                                    <button type="button"
                                                        class="btn-close"
                                                        data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <form
                                                    th:action="@{/studend/share-course}"
                                                    method="post"
                                                    class="ajax-form">
                                                    <div class="modal-body">
                                                        <input type="hidden"
                                                            name="courseId"
                                                            th:value="${khoaHoc.khoahocId}" />
                                                        <div class="mb-3">
                                                            <label
                                                                for="recipientEmail"
                                                                class="form-label">
                                                                <i
                                                                    class="fas fa-envelope text-primary me-2"></i>
                                                                Email ng∆∞·ªùi
                                                                nh·∫≠n:
                                                            </label>
                                                            <input type="email"
                                                                name="recipientEmail"
                                                                class="form-control"
                                                                style="font-size: 14px;"
                                                                required
                                                                placeholder="nhapemail@example.com">
                                                        </div>
                                                        <p
                                                            style="font-size: 14px;">
                                                            <i
                                                                class="fas fa-info-circle text-info me-2"></i>
                                                            Email s·∫Ω ƒë∆∞·ª£c g·ª≠i
                                                            k√®m th√¥ng tin v√†
                                                            li√™n k·∫øt kh√≥a h·ªçc.
                                                        </p>
                                                    </div>
                                                    <div
                                                        class="ajax-message text-center px-3"></div>
                                                    <div class="modal-footer">
                                                        <div
                                                            class="d-flex justify-content-end gap-2 w-100">
                                                            <button
                                                                type="button"
                                                                class="btn btn-sm btn-outline-secondary"
                                                                data-bs-dismiss="modal">
                                                                <i
                                                                    class="fas fa-times me-1"></i>
                                                                ƒê√≥ng
                                                            </button>
                                                            <button
                                                                type="submit"
                                                                class="btn btn-sm fw-semibold btn-outline-primary">
                                                                <i
                                                                    class="fas fa-paper-plane me-1"></i>
                                                                G·ª≠i Email
                                                            </button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- end each -->
                            </div>
                            <!-- end row -->
                        </section>

                        <div th:if="${#lists.isEmpty(listPublished)}"
                            class="text-muted">B·∫°n ch∆∞a c√≥ kh√≥a h·ªçc n√†o.</div>
                    </div>

                    <!-- ƒê√£ g·ª° -->
                    <div class="tab-pane fade" id="unpublished" role="tabpanel">
                        <section class="mb-5 mt-3"
                            th:if="!${#lists.isEmpty(listUnpublished)}">
                            <div
                                class="section-header mb-3 mt-4 px-3 py-2 border-start border-4 border-danger">
                                <h4 class="fw-bold text-dark m-0">
                                    <i
                                        class="bi bi-trash-fill text-danger me-2"></i>
                                    Kh√≥a h·ªçc ƒë√£ x√≥a
                                </h4>
                            </div>
                            <div
                                class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-5 g-4">
                                <div class="col"
                                    th:each="khoaHoc : ${listUnpublished}">
                                    <div class="khoa-hoc-card h-100 shadow-sm"
                                        th:onclick="|window.location.href='/noi-dung-khoa-hoc/${khoaHoc.khoahocId}?back=khoa-hoc-da-tao'|">
                                        <img th:if="${khoaHoc.anhBia != null}"
                                            th:src="${khoaHoc.anhBia}"
                                            alt="·∫¢nh kho√° h·ªçc">

                                        <div
                                            class="card-body d-flex flex-column pb-0">
                                            <h6 class="card-title"
                                                th:text="${khoaHoc.tenKhoaHoc}">T√™n
                                                kh√≥a h·ªçc</h6>
                                        </div>

                                        <div class="card-footer pt-0">
                                            <div class="mb-3">
                                                <p
                                                    th:if="${khoaHoc.giaKhuyenMai != null and khoaHoc.giaKhuyenMai.doubleValue() > 0}"
                                                    class="card-text mb-0">
                                                    <span
                                                        class="fw-bold text-danger me-2"
                                                        th:text="${#numbers.formatDecimal(khoaHoc.giaKhuyenMai, 0, 'COMMA', 0, 'POINT') + ' ‚Ç´'}"></span>
                                                    <del class="text-muted"
                                                        th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ‚Ç´'}"></del>
                                                </p>
                                                <p
                                                    th:if="${khoaHoc.giaKhuyenMai == null or khoaHoc.giaKhuyenMai.doubleValue() == 0}"
                                                    class="card-text fw-bold mb-0">
                                                    <span
                                                        th:text="${#numbers.formatDecimal(khoaHoc.giagoc, 0, 'COMMA', 0, 'POINT') + ' ‚Ç´'}"></span>
                                                </p>
                                            </div>
                                            <div
                                                class="d-flex justify-content-center gap-3 pb-2">
                                                <button type="button"
                                                    class="btn btn-outline-success btn-sm py-1 px-2"
                                                    style="font-size: 12px;"
                                                    th:attr="data-id=${khoaHoc.khoahocId}"
                                                    onclick="hienModalMoLai(event, this)">
                                                    <i
                                                        class="fas fa-undo me-1"></i>
                                                    M·ªü l·∫°i kh√≥a h·ªçc
                                                </button>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <div th:if="${#lists.isEmpty(listUnpublished)}"
                            class="text-muted">B·∫°n ch∆∞a c√≥ kh√≥a h·ªçc n√†o.</div>
                    </div>

                </div>
            </div>

            <!-- Modal x√°c nh·∫≠n x√≥a -->
            <div class="modal fade" id="modalXacNhanXoa" tabindex="-1"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content border-danger">
                        <div class="modal-header bg-danger text-white">
                            <h5 class="modal-title">
                                <i
                                    class="fas fa-exclamation-triangle text-warning me-2"></i>X√°c
                                nh·∫≠n x√≥a kh√≥a h·ªçc üîÅ
                            </h5>
                            <button type="button"
                                class="btn-close btn-close-white"
                                data-bs-dismiss="modal"></button>
                        </div>
                        <div class="modal-body">
                            <i
                                class="fas fa-question-circle text-primary me-2"></i>
                            B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a kh√≥a h·ªçc n√†y kh√¥ng? H√†nh
                            ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.
                        </div>
                        <div class="modal-footer">
                            <button type="button"
                                class="btn btn-outline-secondary"
                                data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i> H·ªßy
                            </button>
                            <button type="button" class="btn btn-outline-danger"
                                id="btnXacNhanXoa">
                                <i class="fas fa-trash-alt me-1"></i> X√≥a
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal Th√¥ng b√°o -->
            <div class="modal fade" id="modalThongBao" tabindex="-1"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header text-white"
                            style="background-color: #130377;">
                            <h6 class="modal-title">
                                <i
                                    class="fas fa-exclamation-circle text-warning me-2"></i>Th√¥ng
                                b√°o b·∫°n v·ª´a x√≥a 1 üîÅ kh√≥a h·ªçc
                            </h6>
                            <button type="button" class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="ƒê√≥ng"></button>
                        </div>
                        <div class="modal-body text-center">
                            <!-- N·ªôi dung s·∫Ω ƒë∆∞·ª£c thay b·∫±ng JS -->
                            ...
                        </div>
                        <div class="modal-footer">
                            <button type="button"
                                class="btn btn-outline-secondary"
                                data-bs-dismiss="modal">
                                <i class="fas fa-times me-1"></i> ƒê√≥ng
                            </button>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Modal x√°c nh·∫≠n ƒë√£ h·ªßy -->
            <div class="modal fade" id="daHuyModal" tabindex="-1"
                aria-labelledby="daHuyModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header bg-primary text-white">
                            <h5 class="modal-title d-flex align-items-center"
                                id="daHuyModalLabel">
                                <i class="bi bi-bookmark-check-fill me-2"></i>
                                Th√¥ng b√°o h·ªßy y√™u c·∫ßu duy·ªát!
                            </h5>
                            <button type="button" class="btn-close text-white"
                                data-bs-dismiss="modal"
                                aria-label="ƒê√≥ng"></button>
                        </div>
                        <div class="modal-body text-center">
                            <i
                                class="bi bi-check-circle-fill text-success fs-6 me-1"></i>
                            <span>
                                Kh√≥a h·ªçc c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c l∆∞u v√†o <strong>Danh
                                    s√°ch b·∫£n nh√°p</strong>.<br>
                                B·∫°n c√≥ th·ªÉ truy c·∫≠p ƒë·ªÉ ti·∫øp t·ª•c ch·ªânh s·ª≠a kh√≥a
                                h·ªçc!
                            </span>
                        </div>

                        <div class="modal-footer">
                            <button type="button"
                                class="btn btn-outline-secondary"
                                data-bs-dismiss="modal">
                                <i class="bi bi-x-circle me-1"></i>ƒê√≥ng
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal x√°c nh·∫≠n m·ªü l·∫°i kh√≥a h·ªçc -->
            <div class="modal fade" id="modalXacNhanMoLai" tabindex="-1"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">X√°c nh·∫≠n</h5>
                            <button type="button" class="btn-close"
                                data-bs-dismiss="modal"
                                aria-label="ƒê√≥ng"></button>
                        </div>
                        <div class="modal-body">
                            B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën <strong>m·ªü l·∫°i kh√≥a
                                h·ªçc</strong> n√†y kh√¥ng?
                        </div>
                        <div class="modal-footer">
                            <button type="button"
                                class="btn btn-secondary btn-sm"
                                data-bs-dismiss="modal">H·ªßy</button>
                            <button type="button" class="btn btn-success btn-sm"
                                id="btnXacNhanMoLai">X√°c nh·∫≠n</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Modal th√¥ng b√°o sau khi m·ªü l·∫°i th√†nh c√¥ng -->

            <div class="modal fade" id="modalThongBaoThanhCong" tabindex="-1"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                        <div class="modal-body text-center py-4">
                            <i
                                class="fas fa-check-circle text-success fs-1 mb-2"></i>
                            <p class="mb-0">Kh√≥a h·ªçc ƒë√£ ƒë∆∞·ª£c m·ªü l·∫°i v√† chuy·ªÉn
                                tr·∫°ng th√°i sang <strong>ƒê√£ xu·∫•t
                                    b·∫£n</strong>.</p>
                        </div>
                    </div>
                </div>
            </div>

            <script>
            let khoaHocIdDangMo = null;

            // Khi nh·∫•n n√∫t "M·ªü l·∫°i"
            function hienModalMoLai(event, button) {
                event.stopPropagation();

                khoaHocIdDangMo = button.getAttribute('data-id');
                const modal = new bootstrap.Modal(document.getElementById('modalXacNhanMoLai'));
                modal.show();
            }

            // Khi x√°c nh·∫≠n m·ªü l·∫°i kh√≥a h·ªçc
            document.getElementById('btnXacNhanMoLai').addEventListener('click', function() {
                if (!khoaHocIdDangMo) return;

                // G·ª≠i y√™u c·∫ßu m·ªü l·∫°i kh√≥a h·ªçc (AJAX/fetch)
                fetch(`/api/khoahoc/mo-lai/${khoaHocIdDangMo}`, {
                        method: 'POST' // ho·∫∑c POST n·∫øu backend d√πng POST
                    })
                    .then(res => {
                        if (!res.ok) throw new Error("Kh√¥ng th·ªÉ m·ªü l·∫°i kh√≥a h·ªçc");
                        return res.text();
                    })
                    .then(data => {
                        // ·∫®n modal x√°c nh·∫≠n
                        bootstrap.Modal.getInstance(document.getElementById('modalXacNhanMoLai')).hide();

                        // Hi·ªán modal th√¥ng b√°o th√†nh c√¥ng
                        const modalSuccess = new bootstrap.Modal(document.getElementById('modalThongBaoThanhCong'));
                        modalSuccess.show();

                        // Reload trang sau 1.5 gi√¢y (ho·∫∑c c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë·ªông)
                        setTimeout(() => {
                            window.location.reload();
                        }, 3000);
                    })
                    .catch(error => {
                        alert("C√≥ l·ªói x·∫£y ra khi m·ªü l·∫°i kh√≥a h·ªçc.");
                        console.error(error);
                    });
            });
        </script>

            <script>
            let khoaHocIdCanXoa = null;

            function xoaKhoaHoc(button, event) {
                event.stopPropagation();
                khoaHocIdCanXoa = button.getAttribute("data-id");

                const modal = new bootstrap.Modal(document.getElementById('modalXacNhanXoa'));
                modal.show();
            }

            document.addEventListener("DOMContentLoaded", () => {
                const btnXacNhanXoa = document.getElementById("btnXacNhanXoa");

                btnXacNhanXoa.addEventListener("click", () => {
                    if (!khoaHocIdCanXoa) return;

                    fetch(`/giangvien/xoa-khoa-hoc/${khoaHocIdCanXoa}`, {
                            method: 'POST'
                        })
                        .then(response => response.json())
                        .then(data => {
                            const modal = new bootstrap.Modal(document.getElementById('modalThongBao'));
                            document.querySelector('#modalThongBao .modal-body').textContent = data.message;
                            modal.show();

                            // ƒê√≥ng modal x√°c nh·∫≠n x√≥a
                            bootstrap.Modal.getInstance(document.getElementById('modalXacNhanXoa')).hide();

                            if (data.success) {
                                setTimeout(() => location.reload(), 5000);
                            }
                        })
                        .catch(error => {
                            console.error('L·ªói khi x√≥a kh√≥a h·ªçc:', error);
                        });
                });
            });
        </script>

            <script th:inline="javascript">
            document.addEventListener("DOMContentLoaded", function() {
                let daHuy = /*[[${daHuy}]]*/ false;
                if (daHuy) {
                    let myModal = new bootstrap.Modal(document.getElementById('daHuyModal'));
                    myModal.show();

                    // ‚úÖ X√≥a query string "?daHuy=true" kh·ªèi URL sau khi hi·ªÉn th·ªã modal
                    const url = new URL(window.location);
                    url.searchParams.delete("daHuy");
                    window.history.replaceState({}, "", url.pathname + url.search);
                }
            });
        </script>
            <script>
            if (sessionStorage.getItem("isGoingBack") === "true") {
                localStorage.removeItem("customBackUrl");
                sessionStorage.removeItem("isGoingBack");
            }
        </script>

            <script>
            document.addEventListener("DOMContentLoaded", function() {
                const mainContent = document.querySelector(".khoahocdatao");
                if (mainContent) {
                    mainContent.classList.add("fade-slide-in"); // C√≥ th·ªÉ kh√¥ng c·∫ßn n·∫øu d√πng `animation` tr·ª±c ti·∫øp trong class
                }
            });
        </script>

            <script>
            document.addEventListener("DOMContentLoaded", function() {
                const urlParams = new URLSearchParams(window.location.search);
                const selectedTab = urlParams.get('tab');

                if (selectedTab) {
                    const tabTrigger = document.querySelector(`[data-bs-target="#${selectedTab}"]`);
                    if (tabTrigger) {
                        const tab = new bootstrap.Tab(tabTrigger);
                        tab.show();

                        // X√≥a ?tab=... kh·ªèi URL sau khi chuy·ªÉn tab
                        const newUrl = window.location.pathname;
                        window.history.replaceState({}, document.title, newUrl);
                    }
                }
            });
        </script>
        </main>
    </body>

</html>