<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
    th:replace="~{/views/gdienChung/templateChung.html::view(~{::main}, ~{::title})}">

    <head>
        <title>Danh sách Khóa học cần phê duyệt</title>
        <meta charset="UTF-8" />
    </head>

    <body>
        <main id="content" class="duyetkhoahoc container pt-5 pb-5">
            <div class="table-wrapper">
                <h2><i class="fas fa-clipboard-check me-2 text-success"></i>Danh
                    sách Khóa học cần phê duyệt</h2>
                <div class="table-responsive">
                    <table
                        class="table table-bordered align-middle text-center">
                        <thead>
                            <tr>
                                <th><i
                                        class="fas fa-hashtag me-1 text-secondary"></i>Id</th>
                                <th><i
                                        class="fas fa-book me-1 text-primary"></i>Tên
                                    Khóa học</th>
                                <th><i
                                        class="fas fa-layer-group me-1 text-info"></i>Danh
                                    mục
                                </th>
                                <th><i
                                        class="fas fa-info-circle me-1 text-warning"></i>Trạng
                                    thái
                                </th>
                                <th><i
                                        class="fas fa-cogs me-1 text-success"></i>Hành
                                    động
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="khoaHoc : ${danhSach}">
                                <td th:text="${khoaHoc.khoahocId}">Id</td>
                                <td th:text="${khoaHoc.tenKhoaHoc}">Tên KH</td>
                                <td th:text="${khoaHoc.danhMuc.tenDanhMuc}">Danh
                                    mục
                                </td>
                                <td>
                                    <span th:switch="${khoaHoc.trangThai}">
                                        <span
                                            th:case="${T(com.duantn.enums.TrangThaiKhoaHoc).PENDING_APPROVAL}"
                                            class="badge bg-warning text-dark">
                                            <i
                                                class="fas fa-hourglass-half me-1"></i>Đang
                                            chờ duyệt
                                        </span>
                                        <span th:case="*"
                                            class="badge bg-secondary">
                                            <i
                                                class="fas fa-question-circle me-1"></i>Không
                                            xác định
                                        </span>
                                    </span>
                                </td>
                                <td>
                                    <a
                                        th:href="@{/kiem-duyet-khoa-hoc/{id}(id=${khoaHoc.khoahocId})}"
                                        class="btn btn-view">
                                        <i class="fas fa-eye"></i>Xem chi tiết
                                    </a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- Modal -->
            <div class="modal fade" id="thongBaoModal" tabindex="-1"
                aria-labelledby="modalLabel" aria-hidden="true"
                th:if="${message}">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content border-0 shadow-lg">
                        <div class="modal-header"
                            th:classappend="${type == 'error'} ? 'bg-danger text-white' : 'bg-primary text-white'">
                            <h5
                                class="modal-title d-flex align-items-center gap-2"
                                id="modalLabel">
                                <i class="bi"
                                    th:classappend="${type == 'error'} ? 'bi-x-circle-fill' : 'bi-check-circle-fill'"></i>
                                <span>Thông báo</span>
                            </h5>
                            <button type="button"
                                class="btn-close btn-close-white"
                                data-bs-dismiss="modal"
                                aria-label="Close"></button>
                        </div>
                        <div class="modal-body text-center fs-5 text-dark"
                            th:text="${message}">
                            Nội dung thông báo sẽ hiển thị ở đây.
                        </div>
                        <div
                            class="modal-footer border-0 justify-content-center">
                            <button type="button"
                                class="btn btn-outline-secondary rounded-pill px-4"
                                data-bs-dismiss="modal">Đóng</button>
                        </div>
                    </div>
                </div>
            </div>

            <script th:if="${message}">
            document.addEventListener("DOMContentLoaded", function() {
                var myModal = new bootstrap.Modal(document.getElementById('thongBaoModal'));
                myModal.show();
            });
        </script>

            <script>
            document.addEventListener("DOMContentLoaded", function() {
                const main = document.getElementById("content");
                if (!sessionStorage.getItem("pageVisited")) {
                    main.classList.add("fade-in-up"); // chạy hiệu ứng lần đầu
                    sessionStorage.setItem("pageVisited", "true");
                }
            });
        </script>
        </main>
    </body>

</html>