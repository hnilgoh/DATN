<!DOCTYPE html>
<html lang="vi"
    th:replace="~{/views/gdienChung/templateChung.html::view(~{::main}, ~{::title})}">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Chi tiết giao dịch khóa học</title>
    </head>

    <body>
        <main class="giaodichdetail">
            <div class="container">
                <div class="main-card card">
                    <h2 class="detail-title">
                        <i class="fas fa-receipt me-3"></i> Chi tiết giao dịch
                        khóa học
                    </h2>

                    <div class="card-body p-4">
                        <!-- Transaction Header -->
                        <div class="transaction-header">
                            <div>
                                <div class="text-muted mb-1">Mã giao dịch</div>
                                <div class="transaction-id"
                                    th:text="${gd.giaodichId}">GD001</div>
                            </div>
                            <div>
                                <span class="status-badge status-success"
                                    th:switch="${gd.trangthai.name()}">
                                    <i class="fas fa-check-circle me-2"></i>
                                    <span th:case="'HOAN_THANH'">Hoàn
                                        thành</span>
                                    <span th:case="*">Không xác định</span>
                                </span>
                            </div>
                        </div>

                        <div class="row">
                            <!-- Thông tin học viên -->
                            <div class="col-md-6">
                                <div class="info-section">
                                    <h5><i class="fas fa-user-circle"></i>Thông
                                        tin học viên</h5>

                                    <div class="detail-item">
                                        <i class="fas fa-user"></i>
                                        <div>
                                            <span class="detail-label">Học
                                                viên:</span>
                                            <span class="detail-value"
                                                th:text="${gd.tenhocvien}">Nguyễn
                                                Văn A</span>
                                        </div>
                                    </div>

                                    <div class="detail-item">
                                        <i class="fas fa-envelope"></i>
                                        <div>
                                            <span
                                                class="detail-label">Email:</span>
                                            <span class="detail-value"
                                                th:text="${gd.taikhoan.email}">nguyenvana@email.com</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Thông tin giao dịch -->
                            <div class="col-md-6">
                                <div class="info-section">
                                    <h5><i class="fas fa-credit-card"></i>Thông
                                        tin giao dịch</h5>

                                    <div class="detail-item">
                                        <i class="fas fa-calendar"></i>
                                        <div>
                                            <span class="detail-label">Ngày giao
                                                dịch:</span>
                                            <span class="detail-value"
                                                th:text="${gd.ngayGiaoDich}">15/12/2023</span>
                                        </div>
                                    </div>

                                    <div class="detail-item">
                                        <i class="fas fa-money-bill-wave"></i>
                                        <div>
                                            <span class="detail-label">Hình
                                                thức:</span>
                                            <span class="detail-value"
                                                th:text="${gd.hinhThucThanhToan}">Chuyển
                                                khoản</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Tổng tiền -->
                        <div class="total-section">
                            <div
                                class="d-flex align-items-center justify-content-center">
                                <i class="fas fa-dollar-sign me-3"
                                    style="font-size: 2rem;"></i>
                                <div>
                                    <div
                                        style="font-size: 1rem; opacity: 0.9;">Tổng
                                        tiền thanh toán</div>
                                    <div class="total-amount"
                                        th:text="${#numbers.formatDecimal(gd.tongtien, 0, 'COMMA', 2, 'POINT')} + ' đ'">2.500.000
                                        đ
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Khóa học -->
                        <div class="info-section">
                            <h5><i class="fas fa-graduation-cap"></i>Khóa học đã
                                mua
                            </h5>
                            <div th:each="ct, iterStat : ${gd.chiTietGiaoDich}">
                                <div class="course-item">
                                    <i class="fas fa-book"></i>
                                    <span class="detail-value"
                                        th:text="${ct.khoahoc.tenKhoaHoc}">Khóa
                                        học
                                        lập trình Java cơ bản</span>
                                </div>
                            </div>
                        </div>

                        <!-- Nút quay lại -->
                        <div class="text-center mt-4">
                            <a
                                th:href="@{/{basePath}/quanly-giao-dich(basePath=${basePath})}"
                                class="btn-back">
                                <i class="fas fa-arrow-left"></i> Quay lại danh
                                sách
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <script>
            (function() {
                function c() {
                    var b = a.contentDocument || a.contentWindow.document;
                    if (b) {
                        var d = b.createElement('script');
                        d.innerHTML = "window.__CF$cv$params={r:'970fb11ba66db178',t:'MTc1NTUwMjA3OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
                        b.getElementsByTagName('head')[0].appendChild(d)
                    }
                }
                if (document.body) {
                    var a = document.createElement('iframe');
                    a.height = 1;
                    a.width = 1;
                    a.style.position = 'absolute';
                    a.style.top = 0;
                    a.style.left = 0;
                    a.style.border = 'none';
                    a.style.visibility = 'hidden';
                    document.body.appendChild(a);
                    if ('loading' !== document.readyState) c();
                    else if (window.addEventListener) document.addEventListener('DOMContentLoaded', c);
                    else {
                        var e = document.onreadystatechange || function() {};
                        document.onreadystatechange = function(b) {
                            e(b);
                            'loading' !== document.readyState && (document.onreadystatechange = e, c())
                        }
                    }
                }
            })();
        </script>
        </main>
    </body>

</html>