<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
  th:replace="~{/views/gdienChung/templateChung.html::view(~{::main}, ~{::title})}">

  <head>
    <meta charset="UTF-8" />
    <title>Danh m·ª•c kh√≥a h·ªçc</title>
  </head>

  <body>
    <main class="danhmuc">
      <div class="container mt-5">

        <h2 class="title-section text-center">üìö Qu·∫£n l√Ω danh m·ª•c kh√≥a h·ªçc</h2>

        <div th:if="${success}"
          class="alert alert-success alert-dismissible fade show" role="alert">
          <span th:text="${success}"></span>
          <button type="button" class="btn-close" data-bs-dismiss="alert"
            aria-label="Close"></button>
        </div>

        <div th:if="${error}"
          class="alert alert-danger alert-dismissible fade show" role="alert">
          <span th:text="${error}"></span>
          <button type="button" class="btn-close" data-bs-dismiss="alert"
            aria-label="Close"></button>
        </div>

        <!-- FORM -->
        <div class="form-card">
          <form class="form-danh-muc"
            th:action="@{${danhmuc.danhmucId} != null ? ${prefixPath + '/danhmuc/edit'} : ${prefixPath + '/danhmuc/add'}}"
            th:object="${danhmuc}" method="post">

            <div th:if="${danhmuc.danhmucId} != null">
              <input type="hidden" th:field="*{danhmucId}" />
            </div>

            <label for="tenDanhMuc">
              <i class="fas fa-tags me-1 text-primary"></i>
              T√™n danh m·ª•c
            </label>
            <input type="text" id="tenDanhMuc" th:field="*{tenDanhMuc}"
              placeholder="VD: L·∫≠p tr√¨nh Web" required />

            <button type="submit" class="btn-submit"
              th:text="${danhmuc.danhmucId} != null ? 'C·∫≠p nh·∫≠t' : 'Th√™m'">Th√™m</button>
          </form>
        </div>

        <!-- DANH S√ÅCH -->
        <div class="list-card" th:if="${!#lists.isEmpty(danhmucs)}">
          <table class="table-danhmuc">
            <thead>
              <tr>
                <th><i class="fas fa-hashtag me-1 text-secondary"></i> Id</th>
                <th><i class="fas fa-tags me-1 text-info"></i> T√™n danh m·ª•c</th>
                <th><i class="fas fa-calendar-alt me-1 text-success"></i> Ng√†y
                  c·∫≠p nh·∫≠t
                </th>
                <th><i class="fas fa-pen-to-square me-1 text-warning"></i> S·ª≠a
                </th>
                <th><i class="fas fa-toggle-on me-1 text-primary"></i> Tr·∫°ng
                  th√°i
                </th>
              </tr>
            </thead>
            <tbody>
              <tr th:each="dm, stat : ${danhmucs}"
                th:classappend="${dm.isDeleted} ? 'row-disabled' : 'row-active'">
                <td th:text="${stat.index + 1}"></td>
                <td th:text="${dm.tenDanhMuc}"></td>
                <td
                  th:text="${#temporals.format(dm.ngayCapNhat, 'yyyy-MM-dd HH:mm')}"></td>
                <td>
                  <a class="btn-table edit"
                    th:href="@{|${prefixPath}/danhmuc/edit/${dm.danhmucId}|}"><i
                      class="fas fa-edit"></i> S·ª≠a</a>
                </td>
                <td>
                  <form
                    th:action="@{|${dm.isDeleted ? prefixPath + '/vohieuhoa/' + dm.danhmucId : prefixPath + '/kichhoat/' + dm.danhmucId}|}"
                    method="post">
                    <button type="submit"
                      class="btn btn-table d-inline-flex align-items-center gap-2 px-3 py-1 rounded-pill"
                      th:classappend="${dm.isDeleted} ? 'btn-outline-danger text-danger disable' : 'btn-outline-success text-success enable'">
                      <i
                        th:class="${dm.isDeleted} ? 'fas fa-ban text-danger' : 'fas fa-undo text-success'"></i>
                      <span
                        th:text="${dm.isDeleted} ? 'V√¥ hi·ªáu h√≥a' : 'Kh√¥i ph·ª•c'">V√¥
                        hi·ªáu h√≥a</span>
                    </button>
                  </form>
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- N·∫øu r·ªóng -->
        <div th:if="${#lists.isEmpty(danhmucs)}" class="empty-note">
          Kh√¥ng c√≥ danh m·ª•c n√†o ƒë∆∞·ª£c hi·ªÉn th·ªã
        </div>
      </div>
    </main>
  </body>

</html>